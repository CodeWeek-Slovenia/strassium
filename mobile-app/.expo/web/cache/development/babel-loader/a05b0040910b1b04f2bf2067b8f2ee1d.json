{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _extends from \"@babel/runtime/helpers/extends\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _jsxFileName = \"C:\\\\Users\\\\aljaz\\\\Main\\\\Development\\\\SmartFood\\\\main\\\\node_modules\\\\react-native-auto-height-image\\\\autoHeightImage.js\";\nvar _excluded = [\"source\", \"style\", \"width\"];\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { PureComponent } from 'react';\nimport Image from 'react-native-android-image-polyfill';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport PropTypes from 'prop-types';\nimport { getImageSizeFitWidth, getImageSizeFitWidthFromCache } from \"./cache\";\nimport { NOOP, DEFAULT_HEIGHT } from \"./helpers\";\n\nvar _Image$propTypes = Image.propTypes,\n    resizeMode = _Image$propTypes.resizeMode,\n    ImagePropTypes = _objectWithoutProperties(_Image$propTypes, [\"resizeMode\"]);\n\nvar AutoHeightImage = function (_PureComponent) {\n  _inherits(AutoHeightImage, _PureComponent);\n\n  var _super = _createSuper(AutoHeightImage);\n\n  function AutoHeightImage(props) {\n    var _this;\n\n    _classCallCheck(this, AutoHeightImage);\n\n    _this = _super.call(this, props);\n    _this.updateSequence = 0;\n\n    _this.setInitialImageHeight();\n\n    return _this;\n  }\n\n  _createClass(AutoHeightImage, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      return _regeneratorRuntime.async(function componentDidMount$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              this.hasMounted = true;\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(this.updateImageHeight(this.props));\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      return _regeneratorRuntime.async(function componentDidUpdate$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _regeneratorRuntime.awrap(this.updateImageHeight(this.props));\n\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.hasMounted = false;\n      this.updateSequence = null;\n    }\n  }, {\n    key: \"setInitialImageHeight\",\n    value: function setInitialImageHeight() {\n      var _this$props = this.props,\n          source = _this$props.source,\n          width = _this$props.width,\n          onHeightChange = _this$props.onHeightChange;\n\n      var _getImageSizeFitWidth = getImageSizeFitWidthFromCache(source, width),\n          _getImageSizeFitWidth2 = _getImageSizeFitWidth.height,\n          height = _getImageSizeFitWidth2 === void 0 ? DEFAULT_HEIGHT : _getImageSizeFitWidth2;\n\n      this.state = {\n        height: height\n      };\n      this.styles = StyleSheet.create({\n        image: {\n          width: width,\n          height: height\n        }\n      });\n      onHeightChange(height);\n    }\n  }, {\n    key: \"updateImageHeight\",\n    value: function updateImageHeight(props) {\n      var source, width, onHeightChange, updateSequence, _await$getImageSizeFi, height;\n\n      return _regeneratorRuntime.async(function updateImageHeight$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              if (!(this.state.height === DEFAULT_HEIGHT || this.props.width !== props.width || this.props.source !== props.source)) {\n                _context3.next = 17;\n                break;\n              }\n\n              source = props.source, width = props.width, onHeightChange = props.onHeightChange;\n              _context3.prev = 2;\n              updateSequence = ++this.updateSequence;\n              _context3.next = 6;\n              return _regeneratorRuntime.awrap(getImageSizeFitWidth(source, width));\n\n            case 6:\n              _await$getImageSizeFi = _context3.sent;\n              height = _await$getImageSizeFi.height;\n\n              if (!(updateSequence !== this.updateSequence)) {\n                _context3.next = 10;\n                break;\n              }\n\n              return _context3.abrupt(\"return\");\n\n            case 10:\n              this.styles = StyleSheet.create({\n                image: {\n                  width: width,\n                  height: height\n                }\n              });\n\n              if (this.hasMounted) {\n                this.setState({\n                  height: height\n                });\n                onHeightChange(height);\n              }\n\n              _context3.next = 17;\n              break;\n\n            case 14:\n              _context3.prev = 14;\n              _context3.t0 = _context3[\"catch\"](2);\n\n              if (this.props.onError) {\n                this.props.onError(_context3.t0);\n              }\n\n            case 17:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, this, [[2, 14]], Promise);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          source = _this$props2.source,\n          style = _this$props2.style,\n          width = _this$props2.width,\n          restProps = _objectWithoutProperties(_this$props2, _excluded);\n\n      return React.createElement(Image, _extends({\n        source: source,\n        style: [this.styles.image, style]\n      }, restProps, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 7\n        }\n      }));\n    }\n  }]);\n\n  return AutoHeightImage;\n}(PureComponent);\n\nAutoHeightImage.propTypes = _objectSpread(_objectSpread({}, ImagePropTypes), {}, {\n  width: PropTypes.number.isRequired,\n  onHeightChange: PropTypes.func\n});\nAutoHeightImage.defaultProps = {\n  onHeightChange: NOOP\n};\nexport { AutoHeightImage as default };","map":{"version":3,"sources":["C:/Users/aljaz/Main/Development/SmartFood/main/node_modules/react-native-auto-height-image/autoHeightImage.js"],"names":["React","PureComponent","Image","PropTypes","getImageSizeFitWidth","getImageSizeFitWidthFromCache","NOOP","DEFAULT_HEIGHT","propTypes","resizeMode","ImagePropTypes","AutoHeightImage","props","updateSequence","setInitialImageHeight","hasMounted","updateImageHeight","source","width","onHeightChange","height","state","styles","StyleSheet","create","image","setState","onError","style","restProps","number","isRequired","func","defaultProps"],"mappings":"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","sourcesContent":["/**\n * @since 2017-04-11 19:10:08\n * @author vivaxy\n */\n\nimport React, { PureComponent } from 'react';\nimport Image from 'react-native-android-image-polyfill';\nimport { StyleSheet } from 'react-native';\nimport PropTypes from 'prop-types';\n\nimport { getImageSizeFitWidth, getImageSizeFitWidthFromCache } from './cache';\nimport { NOOP, DEFAULT_HEIGHT } from './helpers';\n\n// remove `resizeMode` props from `Image.propTypes`\nconst { resizeMode, ...ImagePropTypes } = Image.propTypes;\n\nexport default class AutoHeightImage extends PureComponent {\n  static propTypes = {\n    ...ImagePropTypes,\n    width: PropTypes.number.isRequired,\n    onHeightChange: PropTypes.func\n  };\n\n  static defaultProps = {\n    onHeightChange: NOOP\n  };\n\n  constructor(props) {\n    super(props);\n    this.setInitialImageHeight();\n  }\n\n  updateSequence = 0;\n\n  async componentDidMount() {\n    this.hasMounted = true;\n    await this.updateImageHeight(this.props);\n  }\n\n  async componentDidUpdate() {\n    await this.updateImageHeight(this.props);\n  }\n\n  componentWillUnmount() {\n    this.hasMounted = false;\n    // clear memory usage\n    this.updateSequence = null;\n  }\n\n  setInitialImageHeight() {\n    const { source, width, onHeightChange } = this.props;\n    const { height = DEFAULT_HEIGHT } = getImageSizeFitWidthFromCache(\n      source,\n      width\n    );\n    this.state = { height };\n    this.styles = StyleSheet.create({ image: { width, height } });\n    onHeightChange(height);\n  }\n\n  async updateImageHeight(props) {\n    if (\n      this.state.height === DEFAULT_HEIGHT ||\n      this.props.width !== props.width ||\n      this.props.source !== props.source\n    ) {\n      // image height could not be `0`\n      const { source, width, onHeightChange } = props;\n      try {\n        const updateSequence = ++this.updateSequence;\n        const { height } = await getImageSizeFitWidth(source, width);\n        if (updateSequence !== this.updateSequence) {\n          return;\n        }\n\n        this.styles = StyleSheet.create({ image: { width, height } });\n        if (this.hasMounted) {\n          // guard `this.setState` to be valid\n          this.setState({ height });\n          onHeightChange(height);\n        }\n      } catch (ex) {\n        if (this.props.onError) {\n          this.props.onError(ex);\n        }\n      }\n    }\n  }\n\n  render() {\n    // remove `width` prop from `restProps`\n    const { source, style, width, ...restProps } = this.props;\n    return (\n      <Image\n        source={source}\n        style={[this.styles.image, style]}\n        {...restProps}\n      />\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}