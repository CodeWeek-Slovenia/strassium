{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport { useEffect, useState } from 'react';\nimport { bindActionCreators, combineReducers } from 'redux';\nimport { accType } from \"../Values/accType\";\nimport fireBaseConfig from \"../../Firebase/firebase\";\nimport firebase from \"firebase\";\nimport { useSelector } from 'react-redux';\nvar initState = {\n  storageList: [],\n  shoppingList: []\n};\n\nvar reducer = function reducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  var storageList = state.storageList,\n      shoppingList = state.shoppingList;\n  var emptyList = [];\n  var user = fireBaseConfig.auth().currentUser;\n\n  function setAll(storageList, shoppingList) {\n    firebase.database().ref('userData/' + user.uid).set({\n      storageList: storageList,\n      shoppingList: shoppingList\n    });\n    console.log('stored!');\n  }\n\n  function setStorageList(storageList) {\n    firebase.database().ref('userData/' + user.uid).set({\n      storageList: storageList\n    });\n    console.log('stored!');\n  }\n\n  function setShoppingList(shoppingList) {\n    firebase.database().ref('userData/' + user.uid).set({\n      shoppingList: shoppingList\n    });\n    console.log('stored!');\n  }\n\n  var removeItem = function removeItem(item) {\n    shoppingList.splice(shoppingList.indexOf(item), 1);\n\n    var _temp = _extends({}, action.payload);\n\n    var _check = false;\n    storageList.forEach(function (item_) {\n      if (item_.key == _temp.key) {\n        storageList[storageList.indexOf(item_)].quantity = storageList[storageList.indexOf(item_)].quantity + _temp.quantity;\n        _check = true;\n      }\n    });\n\n    if (!_check) {\n      storageList.push(_temp);\n    }\n\n    setAll(storageList, shoppingList);\n    return {\n      storageList: storageList,\n      shoppingList: shoppingList\n    };\n  };\n\n  var removeItems = function removeItems(item) {\n    var _temp = _extends({}, item);\n\n    var _check = false;\n    storageList.forEach(function (item_) {\n      if (item_.key == _temp.key) {\n        storageList[storageList.indexOf(item_)].quantity = storageList[storageList.indexOf(item_)].quantity + _temp.quantity;\n        _check = true;\n      }\n    });\n\n    if (!_check) {\n      storageList.push(_temp);\n    }\n  };\n\n  var addItem = function addItem(item, list) {\n    var _temp = _extends({}, item);\n\n    var _check = false;\n    console.log(_temp.key);\n    list.forEach(function (item_) {\n      if (item_.key == _temp.key) {\n        list[list.indexOf(item_)].quantity = list[list.indexOf(item_)].quantity + _temp.quantity;\n        _check = true;\n      }\n    });\n\n    if (!_check) {\n      list.push(_temp);\n    }\n  };\n\n  console.log(action.type);\n\n  switch (action.type) {\n    case 'STORAGE_UPDATE':\n      try {\n        console.log('///////////////////hhhh' + action.payload);\n\n        if (!action.payload) {\n          return {\n            storageList: [],\n            shoppingList: shoppingList\n          };\n        } else {\n          return {\n            storageList: action.payload,\n            shoppingList: shoppingList\n          };\n        }\n      } catch (e) {\n        console.log(e);\n      }\n\n    case 'SHOPPING_UPDATE':\n      if (!action.payload) {\n        return {\n          storageList: storageList,\n          shoppingList: []\n        };\n      } else {\n        return {\n          storageList: storageList,\n          shoppingList: action.payload\n        };\n      }\n\n    case 'SHOPPING_REMOVE':\n      return removeItem(action.payload);\n\n    case 'SHOPPING_REMOVE_SINGLE':\n      if (shoppingList[shoppingList.indexOf(action.payload)].quantity > 1) {\n        shoppingList[shoppingList.indexOf(action.payload)].quantity--;\n      } else {\n        shoppingList.splice(shoppingList.indexOf(action.payload), 1);\n      }\n\n      var temp = _extends({}, action.payload);\n\n      var check = false;\n\n      if (storageList !== undefined && storageList.length != 0) {\n        storageList.forEach(function (item) {\n          if (item.key == temp.key) {\n            storageList[storageList.indexOf(item)].quantity++;\n            check = true;\n          }\n        });\n      }\n\n      if (!check) {\n        temp.quantity = 1;\n        storageList.push(temp);\n      }\n\n      setAll(storageList, shoppingList);\n      return {\n        storageList: storageList,\n        shoppingList: shoppingList\n      };\n\n    case 'SHOPPING_REMOVE_ITEMS':\n      shoppingList.forEach(function (item) {\n        removeItems(item);\n      });\n      shoppingList.length = 0;\n      setAll(storageList, shoppingList);\n      return {\n        storageList: storageList,\n        shoppingList: shoppingList\n      };\n\n    case 'SHOPPING_ADD':\n      addItem(action.payload, shoppingList);\n      setAll(storageList, shoppingList);\n      return {\n        storageList: storageList,\n        shoppingList: shoppingList\n      };\n\n    case 'STORAGE_REMOVE':\n      storageList.splice(storageList.indexOf(action.payload), 1);\n      setAll(storageList, shoppingList);\n      return {\n        storageList: storageList,\n        shoppingList: shoppingList\n      };\n\n    case 'STORAGE_REMOVE_SINGLE':\n      if (storageList[storageList.indexOf(action.payload)].quantity > 1) {\n        storageList[storageList.indexOf(action.payload)].quantity--;\n      } else {\n        storageList.splice(storageList.indexOf(action.payload), 1);\n      }\n\n      setAll(storageList, shoppingList);\n      return {\n        storageList: storageList,\n        shoppingList: shoppingList\n      };\n\n    case 'STORAGE_REMOVE_ITEMS':\n      storageList.length = 0;\n      setAll(storageList, shoppingList);\n      return {\n        storageList: storageList,\n        shoppingList: shoppingList\n      };\n\n    case 'STORAGE_ADD':\n      addItem(action.payload, storageList);\n      setAll(storageList, shoppingList);\n      return {\n        storageList: storageList,\n        shoppingList: shoppingList\n      };\n\n    default:\n      return state;\n  }\n};\n\nvar initState2 = {\n  posts: [{\n    username: \"Hisense d.o.o\",\n    location: \"Ljubljana\",\n    description: \"Toast\",\n    quantity: 90,\n    price: 1\n  }, {\n    username: \"DomiÅ¡lija d.o.o\",\n    location: \"Celje\",\n    description: \"Flour\",\n    quantity: 100,\n    price: 2\n  }, {\n    username: \"Kuharji d.o.o.\",\n    location: \"Maribor\",\n    description: \"Juice\",\n    quantity: 42,\n    price: 1\n  }, {\n    username: \"Gorenje d.o.o\",\n    location: \"Velenje\",\n    description: \"Cans of apricots\",\n    quantity: 56,\n    price: 3\n  }, {\n    username: \"Strassium kuhna\",\n    location: \"Velenje\",\n    description: \"Pineapple can\",\n    quantity: 100,\n    price: 1\n  }]\n};\n\nfunction reducer2() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initState2;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  var posts = state.posts;\n  var emptyList = [];\n\n  switch (action.type) {\n    case \"ADD_POST\":\n      console.log(action.payload);\n      posts.push(action.payload);\n      return {\n        posts: posts\n      };\n\n    default:\n      return state;\n  }\n}\n\n;\nvar initState3 = {\n  accType: accType.NONE,\n  loadingState: false,\n  user: ''\n};\n\nfunction propertyReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initState3;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  var accType = state.accType,\n      loadingState = state.loadingState,\n      user = state.user;\n\n  switch (action.type) {\n    case \"ACC_TYPE_CHANGE\":\n      return {\n        accType: action.payload,\n        loadingState: loadingState,\n        user: user\n      };\n\n    case \"LOADING_SET\":\n      console.log(action.payload);\n      return {\n        accType: accType,\n        loadingState: action.payload,\n        user: user\n      };\n\n    case 'SET_USER':\n      return {\n        accType: accType,\n        loadingState: loadingState,\n        user: action.payload\n      };\n\n    default:\n      return state;\n  }\n}\n\n;\nexport default combineReducers({\n  dataReducer: reducer,\n  dataReducer2: reducer2,\n  propertyReducer: propertyReducer\n});","map":{"version":3,"sources":["C:/Users/aljaz/Main/Development/SmartFood/main/Views/reduxComponents/reducers.js"],"names":["useEffect","useState","bindActionCreators","combineReducers","accType","fireBaseConfig","firebase","useSelector","initState","storageList","shoppingList","reducer","state","action","emptyList","user","auth","currentUser","setAll","database","ref","uid","set","console","log","setStorageList","setShoppingList","removeItem","item","splice","indexOf","_temp","payload","_check","forEach","item_","key","quantity","push","removeItems","addItem","list","type","e","temp","check","undefined","length","initState2","posts","username","location","description","price","reducer2","initState3","NONE","loadingState","propertyReducer","dataReducer","dataReducer2"],"mappings":"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","sourcesContent":["import { useEffect, useState } from 'react';\r\nimport { bindActionCreators, combineReducers } from 'redux';\r\nimport { accType } from '../Values/accType';\r\nimport fireBaseConfig from '../../Firebase/firebase'\r\nimport firebase from \"firebase\";\r\nimport { useSelector } from 'react-redux';\r\n\r\n//const user = fireBaseConfig.auth().currentUser;\r\n\r\n\r\n// var starCountRef = firebase.database().ref('users/' + user.uid);\r\n// starCountRef.on('value', (snapshot) => {\r\n// const data = snapshot.val();\r\n// console.log('da one' + data.toString() + ' this is the one!!')\r\n// });\r\n\r\nconst initState = {\r\n    storageList: [],\r\n\r\n    shoppingList:[]\r\n};\r\n\r\n\r\nconst reducer = (state = initState, action) => {\r\n\r\n    const {\r\n        storageList,\r\n        shoppingList,\r\n      } = state;\r\n    \r\n    const emptyList=[];\r\n\r\n    const user = fireBaseConfig.auth().currentUser;\r\n\r\n    function setAll(storageList,shoppingList) {\r\n        firebase.database().ref('userData/' + user.uid).set({\r\n            storageList:storageList,\r\n            shoppingList:shoppingList\r\n        });\r\n        console.log('stored!')\r\n      }\r\n\r\n      function setStorageList(storageList) {\r\n        firebase.database().ref('userData/' + user.uid).set({\r\n            storageList:storageList,\r\n        });\r\n        console.log('stored!')\r\n      }\r\n\r\n      function setShoppingList(shoppingList) {\r\n        firebase.database().ref('userData/' + user.uid).set({\r\n            shoppingList:shoppingList,\r\n        });\r\n        console.log('stored!')\r\n      }\r\n\r\n    const removeItem = (item) =>{\r\n        shoppingList.splice(shoppingList.indexOf(item),1);\r\n        let _temp = Object.assign({}, action.payload);\r\n        let _check = false;\r\n        storageList.forEach(item_ => {\r\n        if(item_.key == _temp.key){\r\n            storageList[storageList.indexOf(item_)].quantity = storageList[storageList.indexOf(item_)].quantity + _temp.quantity;\r\n            _check = true;\r\n            }\r\n        });\r\n        if(!_check){\r\n            storageList.push(_temp);\r\n        }\r\n        setAll(storageList,shoppingList)\r\n        return { storageList, shoppingList };\r\n    }\r\n\r\n    const removeItems = (item) =>{\r\n        //shoppingList.splice(shoppingList.indexOf(item),1);\r\n        let _temp = Object.assign({}, item);\r\n        let _check = false;\r\n        storageList.forEach(item_ => {\r\n        if(item_.key == _temp.key){\r\n            storageList[storageList.indexOf(item_)].quantity = storageList[storageList.indexOf(item_)].quantity + _temp.quantity;\r\n            _check = true;\r\n            }\r\n        });\r\n        if(!_check){\r\n            storageList.push(_temp);\r\n        }\r\n    }\r\n\r\n    const addItem = (item,list) =>{\r\n        let _temp = Object.assign({}, item);\r\n        let _check = false;\r\n        console.log(_temp.key)\r\n        list.forEach(item_ => {\r\n        if(item_.key == _temp.key){\r\n            list[list.indexOf(item_)].quantity = list[list.indexOf(item_)].quantity + _temp.quantity;\r\n            _check = true;\r\n            }\r\n        });\r\n        if(!_check){\r\n            list.push(_temp);\r\n        }\r\n    }\r\n\r\n    console.log(action.type);\r\n    switch (action.type) {\r\n        case 'STORAGE_UPDATE':\r\n            try{\r\n                \r\n            console.log('///////////////////hhhh' + action.payload)\r\n            if(!action.payload){\r\n                return{storageList:[],shoppingList:shoppingList}\r\n            }\r\n            else{\r\n                return{storageList:action.payload,shoppingList:shoppingList}\r\n            }\r\n            }\r\n            catch(e){\r\n                console.log(e)\r\n            }\r\n        case 'SHOPPING_UPDATE':\r\n            if(!action.payload){\r\n                return{storageList:storageList,shoppingList:[]}\r\n            }\r\n            else{\r\n                return{storageList:storageList,shoppingList:action.payload}\r\n            }\r\n        case 'SHOPPING_REMOVE':\r\n\r\n              return removeItem(action.payload);\r\n        case 'SHOPPING_REMOVE_SINGLE':\r\n            //console.log(action.payload)\r\n            if(shoppingList[shoppingList.indexOf(action.payload)].quantity > 1){\r\n                shoppingList[shoppingList.indexOf(action.payload)].quantity--;\r\n\r\n            }else{\r\n                shoppingList.splice(shoppingList.indexOf(action.payload),1);\r\n            }\r\n            let temp = Object.assign({}, action.payload);\r\n            let check = false;\r\n            if(storageList !== undefined && storageList.length != 0){\r\n                storageList.forEach(item => {\r\n                    if(item.key == temp.key){\r\n                        storageList[storageList.indexOf(item)].quantity++;\r\n                        check = true;\r\n                    }\r\n                });\r\n            }\r\n            \r\n            if(!check){\r\n                temp.quantity = 1\r\n                storageList.push(temp);\r\n            }\r\n\r\n            setAll(storageList,shoppingList)\r\n            return { storageList, shoppingList };\r\n        case 'SHOPPING_REMOVE_ITEMS':\r\n            shoppingList.forEach(item =>{ removeItems(item) })\r\n            shoppingList.length = 0;\r\n            setAll(storageList,shoppingList)\r\n            return { storageList , shoppingList };\r\n        case 'SHOPPING_ADD':\r\n            addItem(action.payload,shoppingList);\r\n            //setShoppingList(shoppingList)\r\n            setAll(storageList,shoppingList)\r\n            return { storageList , shoppingList };\r\n        case 'STORAGE_REMOVE':\r\n            storageList.splice(storageList.indexOf(action.payload),1);\r\n            //setStorageList(storageList)\r\n            setAll(storageList,shoppingList)\r\n            return { storageList, shoppingList };\r\n        case 'STORAGE_REMOVE_SINGLE':\r\n        \r\n            if(storageList[storageList.indexOf(action.payload)].quantity > 1){\r\n            storageList[storageList.indexOf(action.payload)].quantity--;\r\n            }else{\r\n                storageList.splice(storageList.indexOf(action.payload),1);\r\n            }\r\n            //setStorageList(storageList)\r\n            setAll(storageList,shoppingList)\r\n            return { storageList, shoppingList };\r\n        case 'STORAGE_REMOVE_ITEMS':\r\n            storageList.length = 0\r\n            //setStorageList(storageList)\r\n            setAll(storageList,shoppingList)\r\n            return { storageList , shoppingList };\r\n        case 'STORAGE_ADD':\r\n            addItem(action.payload,storageList);\r\n            setAll(storageList,shoppingList)\r\n            //setStorageList(storageList)\r\n            return { storageList , shoppingList };\r\n        default:\r\n          return state;\r\n      }\r\n\r\n};\r\n\r\nconst initState2 = {\r\n    posts:[\r\n        {username:\"Hisense d.o.o\",location:\"Ljubljana\", description:\"Toast\",quantity:90,price:1},\r\n        {username:\"DomiÅ¡lija d.o.o\",location:\"Celje\",  description:\"Flour\",quantity:100,price:2},\r\n        {username:\"Kuharji d.o.o.\",location:\"Maribor\", description:\"Juice\",quantity:42,price:1},\r\n        {username:\"Gorenje d.o.o\",location:\"Velenje\", description:\"Cans of apricots\",quantity:56,price:3},\r\n        {username:\"Strassium kuhna\",location:\"Velenje\", description:\"Pineapple can\",quantity:100,price:1}\r\n]\r\n};\r\n\r\nfunction reducer2(state = initState2, action) {\r\n\r\n\r\n\r\n    const {\r\n        posts\r\n      } = state;\r\n    \r\n    const emptyList=[];\r\n\r\n    switch (action.type) {\r\n        case \"ADD_POST\":\r\n            console.log(action.payload)\r\n            posts.push(action.payload);\r\n\r\n            return {posts};\r\n        default:\r\n          return state;\r\n      }\r\n};\r\n\r\n\r\nconst initState3 = {\r\n    accType:accType.NONE,\r\n    loadingState:false,\r\n    user:''\r\n};\r\n\r\nfunction propertyReducer(state = initState3, action) {\r\n\r\n    const {\r\n        accType,\r\n        loadingState,\r\n        user\r\n      } = state;\r\n    \r\n    switch (action.type) {\r\n        case \"ACC_TYPE_CHANGE\":\r\n            return {accType:action.payload,loadingState:loadingState,user:user}\r\n        case \"LOADING_SET\":\r\n            console.log(action.payload)\r\n            return {accType:accType,loadingState:action.payload,user:user}\r\n        case 'SET_USER':\r\n            return {accType:accType,loadingState:loadingState,user:action.payload}\r\n        default:\r\n          return state;\r\n      }\r\n};\r\n\r\n\r\n\r\nexport default combineReducers({\r\n    dataReducer: reducer,\r\n    dataReducer2: reducer2,\r\n    propertyReducer:propertyReducer\r\n  });\r\n"]},"metadata":{},"sourceType":"module"}